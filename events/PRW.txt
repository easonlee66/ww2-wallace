add_namespace = PRW

country_event = {
	id = PRW.1
	title = PRW.1.t
	desc = PRW.1.d
	is_triggered_only = yes

	option = {
		name = PRW.1.a
		start_civil_war = {
			ideology = fascism
			ruling_party = democratic
			capital = 918
			states = { 909 910 911 913 916 917 918 919 }
			size = 0.5
		}
		hidden_effect = {
			random_other_country = {
				limit = {
					original_tag = WAG
					has_government = fascism
				}
				set_stability = 0.9
				set_war_support = 0.8
				add_popularity = {
					ideology = fascism
					popularity = 0.8
				}
				add_popularity = {
					ideology = neutrality
					popularity = 0.1
				}
				add_popularity = {
					ideology = communism
					popularity = 0.05
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.05
				}
			}
			set_capital = {
				state = 915
			}
			set_party_name = {
				ideology = communism
				long_name = WAG_civil_war_party
				name = WAG_civil_war_party
			}
			set_party_name = {
				ideology = democratic
				long_name = WAG_civil_war_party
				name = WAG_civil_war_party
			}
			add_popularity = {
				ideology = communism
				popularity = 0.4
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.4
			}
			add_popularity = {
				ideology = fascism
				popularity = 0.15
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.05
			}
			if = {
				limit = {
					has_army_size = {
						size < 3
					}
				}
				915 = {
					create_unit = {
						division = "division_template = \"wu bu mei chan\" start_experience_factor = 0.2 start_equipment_factor = 0.3"
						owner = ROOT
						count = 2
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
		}
	}
}

country_event = {
	id = PRW.2
	title = PRW.2.t
	desc = PRW.2.d
	is_triggered_only=yes

	option={
		name = PRW.2.a
		trigger = {
			NOT={
				has_completed_focus = WAG_middle_road
				has_completed_focus = WAG_social_democracy_road
			}
		}
		add_popularity = {
			ideology = communism
			popularity = 0.1
		}
		add_political_power = 5
		if = {
			limit = { 
				NOT={
					has_completed_focus = WAG_communism_road
				}
			}
			complete_national_focus = WAG_communism_road
		}
		unlock_decision_category_tooltip = WAG_second_civil_war
		activate_mission = WAG_military_plot_cm
		every_state = {
			limit = {
				is_owned_and_controlled_by = WAG
			}
			set_state_flag = WAG_second_civil_war_against
		}
		set_variable = {
			var = WAG_scw_getland_cost
			value = 50
		}
		set_variable = {
			var = WAG_scw_against_getland_cost
			value = 20
		}
		set_variable = {
			var = WAG_scw_against_pp
			value = political_power
		}
		if = {
			limit = { check_variable = {
				var = WAG_scw_against_pp
				value = 50
				compare = less_than
			} }
			set_variable = {
				var = WAG_scw_against_pp
				value = 50
			}
		}
		unlock_decision_category_tooltip = WAG_second_civil_war_against
		activate_mission = WAG_get_nazi_army_mission
		country_event = {
			id = PRW.3
			days = 100
		}
	}

	option = {
		name = PRW.2.b
		trigger = {
			NOT = {
				has_completed_focus = WAG_middle_road
				has_completed_focus = WAG_communism_road
			}
		}
		add_popularity = {
			ideology = democratic
			popularity = 0.1
		}
		add_political_power = 5
		if = {
			limit = { 
				NOT = {
					has_completed_focus = WAG_social_democracy_road
				}
			}
			complete_national_focus = WAG_social_democracy_road
		}
		unlock_decision_category_tooltip = WAG_second_civil_war
		activate_mission = WAG_military_plot_sd
		set_variable = {
			var = WAG_scw_getland_cost
			value = 20
		}
		set_variable = {
			var = WAG_scw_against_getland_cost
			value = 50
		}
		set_variable = {
			var = WAG_scw_against_pp
			value = political_power
		}
		if = {
			limit = { check_variable = {
				var = WAG_scw_against_pp
				value = 30
				compare = less_than
			} }
			set_variable = {
				var = WAG_scw_against_pp
				value = 30
			}
		}
		unlock_decision_category_tooltip = WAG_second_civil_war_against
		activate_mission = WAG_east_wallace_revolution_mission
		country_event = {
			id = PRW.3
			days = 100
		}
	}

	option = {
		name = PRW.2.c
		trigger = {
			NOT = {
				has_completed_focus = WAG_communism_road
				has_completed_focus = WAG_social_democracy_road
			}
		}
		add_political_power = 5
		if = {
			limit = { 
				NOT = {
					has_completed_focus = WAG_middle_road
				}
			}
			complete_national_focus = WAG_middle_road
		}
#		unlock_decision_category_tooltip = WAG_second_civil_war
		every_state = {
			set_state_flag = WAG_second_civil_war_against
		}
		country_event = {
			id = PRW.3
			days = 100
		}
	}
}

country_event = {
	id = PRW.3
	title = PRW.3.t
	desc = PRW.3.d
#	trigger = {
#		tag = WAG
#		OR = {
#			has_completed_focus = WAG_communism_road
#			has_completed_focus = WAG_social_democracy_road
#			has_completed_focus = WAG_middle_road
#		}
#	}
	is_triggered_only = yes
	option = {
		name = PRW.3.a
		add_stability = -0.5
		retire_country_leader = yes
		create_country_leader = {
			name = "混乱的政府"
			picture = GFX_PRW_a_mess_goverment
			ideology = liberalism
			traits = {
				figurehead_president
			}
		}
		add_ideas = FRA_disjointed_government
	}
}

country_event = {
	id = PRW.4
	title = {
		text = PRW.4.t
		trigger = {
			has_completed_focus = WAG_communism_road
		}
	}
	title = {
		text = PRW.4.tt
		trigger = {
			has_completed_focus = WAG_social_democracy_road
		}
	}
	title = {
		text = PRW.4.ttt
		trigger = {
			has_completed_focus = WAG_middle_road
		}
	}
	desc = PRW.4.d
	is_triggered_only = yes
	option = {
		name = PRW.4.a
		trigger = {
			has_completed_focus = WAG_social_democracy_road
		}
		set_country_flag = WAG_second_civil_war
		if = {
			limit = {
				NOT = {
					has_tech = gw_artillery
				}
				has_completed_focus = WAG_support_from_the_right
			}
			set_technology = {
				gw_artillery = 1
			}
			add_political_power = -100
			random_state = {
				limit = {
					NOT = {
						has_state_flag = WAG_second_civil_war_against
					}
					is_owned_and_controlled_by = WAG
					NOT = {
						state = 917
					}
				}
				set_state_flag = WAG_second_civil_war_against
			}
		}
		if = {
			limit = {
				NOT = {
#					has_equipment = {
#						medium_tank_aa_chassis = 1
#					}
					has_tech = antiair1
					has_tech = antitank1
					has_tech = basic_medium_spaa
				}
				has_country_flag = WAG_nazi_army
			}
			set_technology = {
				antiair1 = 1
				antitank1 = 1
				basic_medium_spaa = 1
			}
			add_political_power = -100
			random_state = {
				limit = {
					NOT = {
						has_state_flag = WAG_second_civil_war_against
					}
					is_owned_and_controlled_by = WAG
					NOT = {
						state = 917
					}
				}
				set_state_flag = WAG_second_civil_war_against
			}
		}
		create_dynamic_country = {
			original_tag = WAG
			set_politics = {
				ruling_party = communism
				elections_allowed = yes
			}
			set_popularities = {
				communism = 50
				democratic = 30
				fascism = 15
				neutrality = 5
			}
			save_event_target_as = second_civil_war_against
			every_state = {
				if = {
					limit = {
						has_state_flag = WAG_second_civil_war_against
						is_owned_and_controlled_by = WAG
					}
					event_target:second_civil_war_against = {
						transfer_state = PREV
					}
				}
			}
			set_technology = {
				tech_support = 1
				tech_engineers = 1
				tech_maintenance_company = 1
			}
			load_oob = PRW_scw_cm
			set_cosmetic_tag = WAG_people_republics
			WAG = {
				WAG_abudullah_an_komi = {
					set_nationality = event_target:second_civil_war_against
				}
			}
			WAG_abudullah_an_komi = {
				promote_character = yes
			}
#			load_focus_tree = wallace_focus
			if = {
				limit = { has_country_flag = WAG_guaduate_indepence_of_KUR_flag }
				KUR = {
					transfer_state = 920
				}
				puppet = KUR
			}
			declare_war_on = {
				target = WAG
				type = civil_war
			}
		}
		add_war_support = 0.1
		load_oob = PRW_scw_sd
		if = {
			limit = {
				has_completed_focus = WAG_support_from_the_right
			}
			random_state = {
				limit = {
					NOT = {
						has_state_flag = WAG_second_civil_war_against
					}
					is_owned_and_controlled_by = WAG
				}
				create_unit = {
					division = "division_template = \"right support\" start_experience_factor = 0.5 start_equipment_factor = 1"
					owner = PREV
					count = 3
				}
			}
		}
		if = {
			limit = { has_country_flag = WAG_build_up_red_army }
			random_state = {
				limit = {
					has_state_flag = WAG_second_civil_war_against
				}
				create_unit = {
					division = "division_template = \"red army\" start_experience_factor = 0.3 start_equipment_factor = 0.9"
					owner = event_target:second_civil_war_against
					count = 5
				}
			}
			event_target:second_civil_war_against = {
				army_experience = 30
			}
		}
		if = {
			limit = { has_completed_focus = WAG_emergency_power }
			random_state = {
				limit = {
					has_state_flag = WAG_second_civil_war_against
				}
				create_unit = {
					division = "division_template = \"WCYL\" start_experience_factor = 0.5 start_equipment_factor = 1"
					owner = event_target:second_civil_war_against
					count = 2
				}
			}
			if = {
				limit = { has_completed_focus = WAG_support_from_the_right }
				random_state = {
					limit = {
						has_state_flag = WAG_second_civil_war_against
					}
					create_unit = {
						division = "division_template = \"WCYL\" start_experience_factor = 0.1 start_equipment_factor = 0.7"
						owner = event_target:second_civil_war_against
						count = 5
					}
				}
			}
		}
		if = {
			limit = { has_country_flag = WAG_nazi_army }
			917 = {
				create_unit = {
					division = "division_template = \"nazi army\" start_experience_factor = 0.5 start_equipment_factor = 1"
					owner = PREV
					count = 5
				}
			}
		}
	}
	option = {
		name = PRW.4.b
		trigger = {
			has_completed_focus = WAG_middle_road
		}
		add_war_support = 0.1
	}
	option = {
		name = PRW.4.c
		trigger = {
			has_completed_focus = WAG_communism_road
		}
		set_country_flag = WAG_second_civil_war
		if = {
			limit = {
				NOT = {
					has_tech = tech_maintenance_company
					has_tech = tech_engineers
				}
				OR = {
					has_completed_focus = WAG_take_WWFF_trust
					has_country_flag = WAG_build_up_red_army
				}
			}
			set_technology = {
				tech_maintenance_company = 1
				tech_engineers = 1
			}
			add_political_power = -100
			random_state = {
				limit = {
					NOT = {
						has_state_flag = WAG_second_civil_war_against
					}
					is_owned_and_controlled_by = WAG
					NOT = {
						state = 912
						state = 914
					}
				}
				set_state_flag = WAG_second_civil_war_against
			}
		}
		set_politics = {
			ruling_party = communism
			elections_allowed = yes
		}
		set_popularities = {
			communism = 50
			democratic = 30
			fascism = 15
			neutrality = 5
		}
		create_dynamic_country = {
			original_tag = WAG
			set_politics = {
				ruling_party = democratic
				elections_allowed = no
			}
			set_popularities = {
				communism = 30
				democratic = 50
				fascism = 15
				neutrality = 5
			}
			save_event_target_as = second_civil_war_against
			every_state = {
				if = {
					limit = {
						has_state_flag = WAG_second_civil_war_against
						is_owned_and_controlled_by = WAG
					}
					event_target:second_civil_war_against = {
						transfer_state = PREV
					}
				}
			}
			set_technology = {
				gw_artillery = 1
				basic_medium_spaa = 1
				antiair1 = 1
				antitank1 = 1
			}
			load_oob = PRW_scw_sd
			set_cosmetic_tag = WAG_fourth_republic
			WAG = {
				WAG_salman_ritin_somin = {
					set_nationality = event_target:second_civil_war_against
				}
			}
			WAG_salman_ritin_somin = {
				promote_character = yes
			}
#			load_focus_tree = wallace_focus
			declare_war_on = {
				target = WAG
				type = civil_war
			}
		}
		add_war_support = 0.1
		load_oob = PRW_scw_cm
		if = {
			limit = {
				has_completed_focus = WAG_train_WCYL
			}
			random_state = {
				limit = {
					has_state_flag = WAG_second_civil_war_against
				}
				create_unit = {
					division = "division_template = \"right support\" start_experience_factor = 0.5 start_equipment_factor = 1"
					owner = event_target:second_civil_war_against
					count = 3
				}
			}
		}
		if = {
			limit = { has_country_flag = WAG_build_up_red_army }
			random_state = {
				limit = {
					NOT = {
						has_state_flag = WAG_second_civil_war_against
					}
					is_owned_and_controlled_by = WAG
				}
				create_unit = {
					division = "division_template = \"red army\" start_experience_factor = 0.3 start_equipment_factor = 0.9"
					owner = PREV
					count = 7
				}
			}
		}
		if = {
			limit = { has_completed_focus = WAG_train_WCYL }
			random_state = {
				limit = {
					NOT = {
						has_state_flag = WAG_second_civil_war_against
					}
					is_owned_and_controlled_by = WAG
				}
				create_unit = {
					division = "division_template = \"WCYL\" start_experience_factor = 0.5 start_equipment_factor = 1"
					owner = PREV
					count = 3
				}
			}
			if = {
				limit = { has_completed_focus = WAG_take_WWFF_trust }
				random_state = {
					limit = {
						NOT = {
							has_state_flag = WAG_second_civil_war_against
						}
					}
					create_unit = {
						division = "division_template = \"WCYL\" start_experience_factor = 0.1 start_equipment_factor = 0.7"
						owner = PREV
						count = 5
					}
				}
			}
		}
		if = {
			limit = { has_country_flag = WAG_nazi_army }
			event_target:second_civil_war_against = {
				army_experience = 30
			}
			917 = {
				create_unit = {
					division = "division_template = \"nazi army\" start_experience_factor = 0.5 start_equipment_factor = 1"
					owner = event_target:second_civil_war_against
					count = 5
				}
			}
		}
	}
}